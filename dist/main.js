!function(e){function t(t){for(var r,i,c=t[0],l=t[1],u=t[2],p=0,f=[];p<c.length;p++)i=c[p],o[i]&&f.push(o[i][0]),o[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);for(s&&s(t);f.length;)f.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,c=1;c<n.length;c++){var l=n[c];0!==o[l]&&(r=!1)}r&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={1:0},a=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="dist/";var c=window.webpackJsonp=window.webpackJsonp||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var s=l;a.push([101,0]),n()}({101:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"all",function(){return Ct});var o={};n.r(o),n.d(o,"load",function(){return St}),n.d(o,"add",function(){return xt}),n.d(o,"remove",function(){return Nt}),n.d(o,"changeCnt",function(){return Tt}),n.d(o,"clean",function(){return zt});var a,i=n(0),c=n.n(i),l=n(13),u=n.n(l),s=n(11),p=function(e){return Object(s.b)("stores")(Object(s.c)(e))},f=n(20),y=n(10),m=n(109);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var O=Object(s.b)("stores")(a=Object(s.c)(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),h(this,v(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,c.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.stores.products.items.map(function(e){return c.a.createElement(m.a.Item,{key:e.id,className:"mb-3"},c.a.createElement("img",{className:"d-block col-6 m-auto",src:e.image,alt:"Slide"}),c.a.createElement(m.a.Caption,{className:"position-static"},c.a.createElement("h3",null,e.title),c.a.createElement("p",null,e.description)))});return c.a.createElement("div",null,c.a.createElement(m.a,{className:"bg-secondary"},e))}}])&&d(n.prototype,r),o&&d(n,o),t}())||a)||a,E=n(4),w=n.n(E);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var x=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=k(this,(e=C(t)).call.apply(e,[this].concat(o)))).nativeInput=c.a.createRef(),n.checkChange=function(e){n.props.value.toString()!==e.target.value&&n.props.onChange(e)},n.checkEnterKey=function(e){13===e.keyCode&&n.checkChange(e)},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,c.a.Component),n=t,(r=[{key:"componentDidUpdate",value:function(e,t){var n=this.nativeInput.current;e.value!==this.props.value&&this.props.value!=n.value&&(n.value=this.props.value)}},{key:"setValue",value:function(e){this.nativeInput.current.value=e}},{key:"render",value:function(){return c.a.createElement("input",P({},this.props.nativeProps,{defaultValue:this.props.value,onBlur:this.checkChange,onKeyUp:this.checkEnterKey,ref:this.nativeInput}))}}])&&_(n.prototype,r),o&&_(n,o),t}();x.defaultProps={onChange:function(e){},nativeProps:{}},x.propTypes={value:w.a.any.isRequired,onChange:w.a.func,nativeProps:w.a.object};var N=n(64),T=n.n(N),z=n(18),D=n(19);function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t){return!t||"object"!==I(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var L=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=A(this,(e=M(t)).call.apply(e,[this].concat(o)))).lazyInput=c.a.createRef(),n.increase=function(){n.set(n.props.cnt+1)},n.decrease=function(){n.set(n.props.cnt-1)},n.onChange=function(e){var t=parseInt(e.target.value),r=n.set(isNaN(t)?n.props.min:t);r.toString()!==e.target.value&&n.lazyInput.current.setValue(r)},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(t,c.a.PureComponent),n=t,(r=[{key:"set",value:function(e){var t=Math.min(Math.max(e,this.props.min),this.props.max);return this.props.onChange(t),t}},{key:"render",value:function(){return c.a.createElement("div",{className:"d-flex"},c.a.createElement("button",{onClick:this.decrease,className:"btn btn-outline-warning btn-sm",disabled:this.props.disabled||this.props.cnt<=this.props.min},c.a.createElement(z.a,{icon:D.b})),c.a.createElement(x,{nativeProps:{type:"text",className:T.a.input,disabled:this.props.disabled},value:this.props.cnt,onChange:this.onChange,ref:this.lazyInput}),c.a.createElement("button",{onClick:this.increase,className:"btn btn-outline-success btn-sm",disabled:this.props.disabled||this.props.cnt>=this.props.max},c.a.createElement(z.a,{icon:D.c})))}}])&&R(n.prototype,r),o&&R(n,o),t}();function V(){return(V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function $(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}L.defaultProps={onChange:function(e){}},L.propTypes={min:w.a.number.isRequired,max:w.a.number.isRequired,cnt:w.a.number.isRequired,onChange:w.a.func,disabled:w.a.bool};var q=Object(f.f)(function(e){var t=e.history,n=(e.location,e.match,e.staticContext,e.to),r=$(e,["history","location","match","staticContext","to"]);return c.a.createElement("button",V({},r,{onClick:function(e){return t.push(n)}}))});function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(e,t){return!t||"object"!==U(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var J,Z,Q,W=p(function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),G(this,K(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(t,c.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.stores.cart,t=e.productsDetailed.map(function(t,n){return c.a.createElement("tr",{key:t.id},c.a.createElement("td",null,t.title),c.a.createElement("td",null,t.price),c.a.createElement("td",null,c.a.createElement(L,{min:1,max:t.rest,cnt:t.cnt,onChange:function(n){return e.change(t.id,n)},disabled:t.id in e.processId})),c.a.createElement("td",null,t.price*t.cnt),c.a.createElement("td",null,c.a.createElement("button",{onClick:function(){return e.remove(t.id)},disabled:t.id in e.processId,className:"btn btn-outline-danger btn-sm"},c.a.createElement(z.a,{icon:D.e}))))});return c.a.createElement("div",null,c.a.createElement("h2",null,"Cart"),c.a.createElement("table",{className:"table table-bordered"},c.a.createElement("thead",{className:"bg-light"},c.a.createElement("tr",null,c.a.createElement("td",null,"Title"),c.a.createElement("td",null,"Price"),c.a.createElement("td",null,"Count"),c.a.createElement("td",null,"Total"),c.a.createElement("td",null,"Actions"))),c.a.createElement("tbody",null,t)),c.a.createElement("h3",null,"Total: $",e.total),c.a.createElement("hr",null),c.a.createElement(q,{to:$e.order,className:"btn btn-primary"},"Send"))}}])&&H(n.prototype,r),o&&H(n,o),t}()),X=n(106),Y=n(103),ee=n(107),te=n(5);function ne(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oe(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ie(e,t,n,r,o){var a={};return Object.keys(r).forEach(function(e){a[e]=r[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var ce,le=(Z=ie((J=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),oe(this,"products",Z,this),oe(this,"processId",Q,this),this.rootStore=t,this.api=this.rootStore.api.cart,this.storage=this.rootStore.storage,this.token=this.storage.getItem("cartToken")}var t,n,r;return t=e,(n=[{key:"load",value:function(){var e=this;this.api.load(this.token).then(function(t){Object(te.m)(function(){e.products=t.cart,t.needUpdate&&(e.token=t.token,e.storage.setItem("cartToken",e.token))})}).catch(function(){})}},{key:"add",value:function(e){var t=this;this.inCart(e)||e in this.processId||(this.processId[e]=!0,this.api.add(this.token,e).then(function(n){n&&t.products.push({id:e,cnt:1})}).catch(function(){t.rootStore.notifications.add("Can`t add item in cart! Try again!")}).finally(function(){delete t.processId[e]}))}},{key:"change",value:function(e,t){var n=this;if(!(e in this.processId)){var r=this.products.findIndex(function(t){return t.id===e});-1!==r&&(this.processId[e]=!0,this.api.changeCnt(this.token,e,t).then(function(o){n.products[r].cnt=t,delete n.processId[e]}))}}},{key:"remove",value:function(e){var t=this;if(this.inCart(e)&&!(e in this.processId)){var n=this.products.findIndex(function(t){return t.id===e});-1!==n&&(this.processId[e]=!0,this.api.remove(this.token,e).then(function(r){t.products.splice(n,1),delete t.processId[e]}))}}},{key:"clean",value:function(){var e=this;return new Promise(function(t,n){e.api.clean(e.token).then(function(r){r?(e.products=[],t()):n()})})}},{key:"productsDetailed",get:function(){var e=this;return this.products.map(function(t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(n,!0).forEach(function(t){re(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e.rootStore.products.getById(t.id),{cnt:t.cnt})})}},{key:"inCart",get:function(){var e=this;return function(t){return e.products.some(function(e){return e.id===t})}}},{key:"cartCnt",get:function(){return this.products.length}},{key:"total",get:function(){return this.productsDetailed.reduce(function(e,t){return e+t.price*t.cnt},0)}}])&&ae(t.prototype,n),r&&ae(t,r),e}()).prototype,"products",[te.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Q=ie(J.prototype,"processId",[te.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),ie(J.prototype,"productsDetailed",[te.e],Object.getOwnPropertyDescriptor(J.prototype,"productsDetailed"),J.prototype),ie(J.prototype,"inCart",[te.e],Object.getOwnPropertyDescriptor(J.prototype,"inCart"),J.prototype),ie(J.prototype,"cartCnt",[te.e],Object.getOwnPropertyDescriptor(J.prototype,"cartCnt"),J.prototype),ie(J.prototype,"total",[te.e],Object.getOwnPropertyDescriptor(J.prototype,"total"),J.prototype),ie(J.prototype,"load",[te.d],Object.getOwnPropertyDescriptor(J.prototype,"load"),J.prototype),ie(J.prototype,"add",[te.d],Object.getOwnPropertyDescriptor(J.prototype,"add"),J.prototype),ie(J.prototype,"change",[te.d],Object.getOwnPropertyDescriptor(J.prototype,"change"),J.prototype),ie(J.prototype,"remove",[te.d],Object.getOwnPropertyDescriptor(J.prototype,"remove"),J.prototype),ie(J.prototype,"clean",[te.d],Object.getOwnPropertyDescriptor(J.prototype,"clean"),J.prototype),J);function ue(e){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pe(e,t){return!t||"object"!==ue(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fe(e){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ye(e,t){return(ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var me=Object(s.b)("stores")(ce=Object(s.c)(ce=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=pe(this,(e=fe(t)).call.apply(e,[this].concat(o)))).state={showModal:!1},n.show=function(){n.setState({showModal:!0})},n.hide=function(){n.setState({showModal:!1})},n.confirm=function(){n.props.stores.order.send().then(function(){n.hide(),n.props.history.push($e.result)})},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ye(e,t)}(t,c.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.stores.order,t=this.props.stores.cart,n=[],r=function(t){var r=e.formData[t];n.push(c.a.createElement(X.a.Group,{key:t,controlId:"order-form-"+t},c.a.createElement(X.a.Label,null,r.label),c.a.createElement(X.a.Control,{type:"text",value:r.value,onChange:function(n){return e.change(t,n.target.value)}}),null===r.valid||r.valid?"":c.a.createElement(X.a.Text,{className:"text-muted"},r.errorText)))};for(var o in e.formData)r(o);return c.a.createElement("div",null,c.a.createElement("h2",null,"Order"),c.a.createElement("hr",null),c.a.createElement(X.a,null,n),c.a.createElement(y.b,{className:"btn btn-warning",to:$e.home},"Back to cart")," ",c.a.createElement(Y.a,{variant:"primary",onClick:this.show,disabled:!e.formValid},"Apply order"),c.a.createElement(ee.a,{show:this.state.showModal,backdrop:"static",onHide:this.hide},c.a.createElement(ee.a.Header,{closeButton:!0},c.a.createElement(ee.a.Title,null,"Check information")),c.a.createElement(ee.a.Body,null,c.a.createElement("strong",null,"Total: ",t.total)),c.a.createElement(ee.a.Footer,null,c.a.createElement(Y.a,{variant:"secondary",onClick:this.hide},"Cancel"),c.a.createElement(Y.a,{variant:"primary",onClick:this.confirm},"Apply"))))}}])&&se(n.prototype,r),o&&se(n,o),t}())||ce)||ce;function be(e){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function de(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function he(e,t){return!t||"object"!==be(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ve(e){return(ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ge(e,t){return(ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Oe,Ee=p(function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),he(this,ve(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ge(e,t)}(t,c.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.stores.order.lastOrderCache;return c.a.createElement("div",null,c.a.createElement("h2",null,"Congratulations!"),c.a.createElement("p",null,"Hi, ",e.name,"!"),c.a.createElement("p",null,c.a.createElement("strong",null,"Total: $",e.total)))}}])&&de(n.prototype,r),o&&de(n,o),t}()),we=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("h1",null,"Error 404, page not found"),c.a.createElement("hr",null),c.a.createElement("div",{className:"alert alert-warning"},c.a.createElement("p",null,c.a.createElement(y.b,{to:$e.home},"Go to home page"))))},je=n(110),Pe=n(68),_e=n.n(Pe),ke=function(e){var t=e.inCart,n=e.onRemove,r=e.onAdd,o=e.disabled;return t?c.a.createElement(Y.a,{variant:"danger",onClick:n,disabled:o},"Remove from cart"):c.a.createElement(Y.a,{variant:"success",onClick:r,disabled:o},"Add to cart")};function Ce(e){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xe(e,t){return!t||"object"!==Ce(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ne(e){return(Ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Te(e,t){return(Te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ze,De=Object(s.b)("stores")(Oe=Object(s.c)(Oe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),xe(this,Ne(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Te(e,t)}(t,c.a.Component),n=t,(r=[{key:"render",value:function(){var e=this,t=this.props.stores.products,n=this.props.stores.cart,r=t.items.map(function(e){return c.a.createElement("div",{className:"col col-6 "+_e.a.col,key:e.id},c.a.createElement(je.a,null,c.a.createElement(je.a.Body,{className:"row"},c.a.createElement(je.a.Img,{variant:"top",className:"col-5 p-0 pl-2",src:e.image}),c.a.createElement("div",{className:"col-7 d-flex flex-column"},c.a.createElement(je.a.Title,null,e.title),c.a.createElement(je.a.Text,null,c.a.createElement("strong",null,"Price: ",e.price)),c.a.createElement(y.b,{className:"mb-3 ",to:qe("product",{id:e.id})},"Get more..."),c.a.createElement(ke,{inCart:n.inCart(e.id),onAdd:function(){return n.add(e.id)},onRemove:function(){return n.remove(e.id)},disabled:e.id in n.processId})))))});return c.a.createElement("div",null,c.a.createElement("h1",null,"Products page"),c.a.createElement("div",{className:"row"},r),c.a.createElement("hr",null),c.a.createElement("button",{className:"btn btn-danger",onClick:function(){return e.props.stores.notifications.add(Math.random()+" error!")}},"Test Error button"))}}])&&Se(n.prototype,r),o&&Se(n,o),t}())||Oe)||Oe,Ie=function(e){var t=e.title,n=e.image,r=e.price,o=e.backUrl,a=e.inCart,i=e.onAdd,l=e.onRemove;return c.a.createElement("div",{className:"row"},c.a.createElement("img",{src:n,className:"col-4"}),c.a.createElement("div",{className:"col-8"},c.a.createElement(y.b,{to:o},"Back to list"),c.a.createElement("h1",null,t),c.a.createElement("hr",null),c.a.createElement("div",null,c.a.createElement("strong",null,"Price: ",r)),c.a.createElement("p",null,"Text about product"),c.a.createElement(ke,{inCart:a,onAdd:i,onRemove:l})))};function Re(e){return(Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Me(e,t){return!t||"object"!==Re(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Be(e){return(Be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Le(e,t){return(Le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ve=[{name:"home",url:"/",component:O,exact:!0},{name:"productList",url:"/products",component:De,exact:!0},{name:"product",url:"/products/:id",component:Object(s.b)("stores")(ze=Object(s.c)(ze=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Me(this,Be(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Le(e,t)}(t,c.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.match.params.id,t=this.props.stores.products.getById(e),n=this.props.stores.cart;return null===t?c.a.createElement(we,null):c.a.createElement(Ie,{title:t.title,image:t.image,price:t.price,backUrl:$e.productList,inCart:n.inCart(t.id),onAdd:function(){return n.add(t.id)},onRemove:function(){return n.remove(t.id)}})}}])&&Ae(n.prototype,r),o&&Ae(n,o),t}())||ze)||ze,exact:!0},{name:"cart",url:"/cart",component:W,exact:!0},{name:"order",url:"/order",component:me,exact:!0},{name:"result",url:"/done",component:Ee,exact:!0},{url:"**",component:function(){return c.a.createElement(we,null)}}],$e={};Ve.forEach(function(e){e.hasOwnProperty("name")&&($e[e.name]=e.url)});var qe=function(e,t){if(!$e.hasOwnProperty(e))return null;var n=$e[e];for(var r in t)n=n.replace(":"+r,t[r]);return n},Ue=Ve,He=n(35),Ge=n.n(He),Ke=n(104),Fe=n(111),Je=n(105);function Ze(e){return(Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function We(e,t){return!t||"object"!==Ze(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xe(e){return(Xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ye(e,t){return(Ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var et=p(function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),We(this,Xe(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ye(e,t)}(t,c.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.stores.notifications,t=e.list.map(function(t){return c.a.createElement(Ke.a,{key:t.id,classNames:{enter:Ge.a.itemEnter,enterActive:Ge.a.itemEnterActive,exitActive:Ge.a.itemLeaveActive},timeout:500},c.a.createElement(Je.a,{variant:"warning",onClick:function(){e.remove(t.id)},dismissible:!0},t.message))});return c.a.createElement(Fe.a,{className:Ge.a.box},t)}}])&&Qe(n.prototype,r),o&&Qe(n,o),t}()),tt=n(108);function nt(e){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ot(e,t){return!t||"object"!==nt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function at(e){return(at=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function it(e,t){return(it=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ct,lt,ut=p(function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ot(this,at(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&it(e,t)}(t,c.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.stores.cart,t=Ue.map(function(e){return c.a.createElement(f.a,{path:e.url,component:e.component,exact:e.exact,key:e.url})});return c.a.createElement(y.a,null,c.a.createElement(et,null),c.a.createElement("header",{className:"mb-5"},c.a.createElement(tt.a,{bg:"light",expand:"lg"},c.a.createElement("div",{className:"container"},c.a.createElement(y.c,{to:$e.home,className:"navbar-brand text-primary"},c.a.createElement(z.a,{icon:D.a})," BestBookShop"),c.a.createElement(y.c,{to:"/cart",className:"nav-link ml-auto text-body"},c.a.createElement("div",{className:"text-right"},c.a.createElement(z.a,{icon:D.d,size:"lg"}),c.a.createElement("sup",{className:"badge badge-danger d-inline-flex"},c.a.createElement("small",null,e.cartCnt))),c.a.createElement("div",{className:"text-right"},"$",e.total))))),c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col col-3"},c.a.createElement("div",{className:"list-group"},c.a.createElement(y.c,{className:"list-group-item list-group-item-action",to:$e.home,exact:!0,activeClassName:"active"},"Home"),c.a.createElement(y.c,{className:"list-group-item list-group-item-action",to:$e.productList,exact:!0,activeClassName:"active"},"Catalog"),c.a.createElement(y.c,{className:"list-group-item list-group-item-action",to:$e.cart,activeClassName:"active"},"Cart"),c.a.createElement(y.c,{className:"list-group-item list-group-item-action",to:$e.order,activeClassName:"active"},"Order now"))),c.a.createElement("div",{className:"col col-9"},c.a.createElement(f.c,null,t)))))}}])&&rt(n.prototype,r),o&&rt(n,o),t}());n(100);function st(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pt(e,t,n,r,o){var a={};return Object.keys(r).forEach(function(e){a[e]=r[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var ft,yt,mt,bt=(lt=pt((ct=function(){function e(t){var n,r,o,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,r="items",a=this,(o=lt)&&Object.defineProperty(n,r,{enumerable:o.enumerable,configurable:o.configurable,writable:o.writable,value:o.initializer?o.initializer.call(a):void 0}),this.rootStore=t,this.api=this.rootStore.api.products}var t,n,r;return t=e,(n=[{key:"load",value:function(){var e=this;return new Promise(function(t,n){e.api.all().then(function(n){e.items=n,t(!0)})})}},{key:"getById",value:function(e){var t=this.productsMap[e];return void 0===t?null:this.items[t]}},{key:"productsMap",get:function(){var e={};return this.items.forEach(function(t,n){e[t.id.toString()]=n}),e}}])&&st(t.prototype,n),r&&st(t,r),e}()).prototype,"items",[te.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),pt(ct.prototype,"productsMap",[te.e],Object.getOwnPropertyDescriptor(ct.prototype,"productsMap"),ct.prototype),pt(ct.prototype,"load",[te.d],Object.getOwnPropertyDescriptor(ct.prototype,"load"),ct.prototype),ct);function dt(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function ht(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vt(e,t,n,r,o){var a={};return Object.keys(r).forEach(function(e){a[e]=r[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var gt,Ot,Et=(yt=vt((ft=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),dt(this,"formData",yt,this),dt(this,"lastOrderCache",mt,this),this.rootStore=t}var t,n,r;return t=e,(n=[{key:"change",value:function(e,t){var n=this.formData[e];n.value=t,n.valid=n.validator(n.value)}},{key:"send",value:function(){var e=this;return new Promise(function(t,n){e.lastOrderCache.total=e.rootStore.cart.total,e.rootStore.cart.clean().then(function(){for(var n in e.formData)e.lastOrderCache[n]=e.formData[n].value,e.formData[n].value="";t()})})}},{key:"formValid",get:function(){return Object.values(this.formData).every(function(e){return e.valid})}},{key:"data",get:function(){var e={};for(var t in this.formData)e[t]=this.formData[t].value;return e}}])&&ht(t.prototype,n),r&&ht(t,r),e}()).prototype,"formData",[te.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{name:{value:"",label:"Name",validator:function(e){return/^[aA-zZ ]{2,}$/.test(e)},errorText:"Латинские символы, не менее двух",valid:null},phone:{value:"",label:"Phone",validator:function(e){return/^[0-9]{7,15}$/.test(e)},errorText:"От 7 до 15 цифр",valid:null},email:{value:"",label:"Email",validator:function(e){return/^.+@.+$/.test(e)},errorText:"Собака",valid:null}}}}),mt=vt(ft.prototype,"lastOrderCache",[te.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{name:"",email:"",phone:"",total:""}}}),vt(ft.prototype,"formValid",[te.e],Object.getOwnPropertyDescriptor(ft.prototype,"formValid"),ft.prototype),vt(ft.prototype,"data",[te.e],Object.getOwnPropertyDescriptor(ft.prototype,"data"),ft.prototype),vt(ft.prototype,"change",[te.d],Object.getOwnPropertyDescriptor(ft.prototype,"change"),ft.prototype),vt(ft.prototype,"send",[te.d],Object.getOwnPropertyDescriptor(ft.prototype,"send"),ft.prototype),ft);function wt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jt(e,t,n,r,o){var a={};return Object.keys(r).forEach(function(e){a[e]=r[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var Pt=(Ot=jt((gt=function(){function e(t){var n,r,o,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,r="notifications",a=this,(o=Ot)&&Object.defineProperty(n,r,{enumerable:o.enumerable,configurable:o.configurable,writable:o.writable,value:o.initializer?o.initializer.call(a):void 0}),this._ai=0,this.rootStore=t}var t,n,r;return t=e,(n=[{key:"add",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;if(this.notifications[++this._ai]={id:this._ai,message:e,type:n},null!==r){var o=this._ai;setTimeout(function(){t.remove(o)},r)}}},{key:"remove",value:function(e){e in this.notifications&&delete this.notifications[e]}},{key:"list",get:function(){return Object.values(this.notifications)}}])&&wt(t.prototype,n),r&&wt(t,r),e}()).prototype,"notifications",[te.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),jt(gt.prototype,"list",[te.e],Object.getOwnPropertyDescriptor(gt.prototype,"list"),gt.prototype),jt(gt.prototype,"add",[te.d],Object.getOwnPropertyDescriptor(gt.prototype,"add"),gt.prototype),jt(gt.prototype,"remove",[te.d],Object.getOwnPropertyDescriptor(gt.prototype,"remove"),gt.prototype),gt),_t="/reactcourseapi/";function kt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_t;return fetch(n+e,t).then(function(e){return 200!==e.status?e.text().then(function(e){throw new Error(e)}):e.json()})}function Ct(){return kt("products/all.php")}function St(e){var t="cart/load.php";return null!==e&&(t+="?token=".concat(e)),kt(t)}function xt(e,t){return kt("cart/add.php?token=".concat(e,"&id=").concat(t))}function Nt(e,t){return kt("cart/remove.php?token=".concat(e,"&id=").concat(t))}function Tt(e,t,n){return kt("cart/change.php?token=".concat(e,"&id=").concat(t,"&cnt=").concat(n))}function zt(e){return kt("cart/clean.php?token=".concat(e))}var Dt=new function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.api={products:r,cart:o},this.storage=localStorage,this.cart=new le(this),this.products=new bt(this),this.order=new Et(this),this.notifications=new Pt(this)};Dt.products.load().then(function(){u.a.render(c.a.createElement(s.a,{stores:Dt},c.a.createElement(ut,null)),document.querySelector("#app"))}),Dt.cart.load()},35:function(e,t,n){e.exports={box:"box__9f3543b",item:"item__4c42bd8",itemEnter:"itemEnter__87ef41e",itemEnterActive:"itemEnterActive__b921bd9",itemLeaveActive:"itemLeaveActive__8c84deb"}},64:function(e,t,n){e.exports={input:"input__569093f"}},68:function(e,t,n){e.exports={col:"col__bb9b535"}}});